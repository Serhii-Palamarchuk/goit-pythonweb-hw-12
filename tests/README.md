# –¢–µ—Å—Ç–∏ –¥–ª—è Contacts API

–¶—è –ø–∞–ø–∫–∞ –º—ñ—Å—Ç–∏—Ç—å –≤—Å—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ API –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –∑ **81% –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É**.

## üéØ –î–æ—Å—è–≥–Ω–µ–Ω–Ω—è
- ‚úÖ **177 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É—Å–ø—ñ—à–Ω–æ** (0 –ø–æ–º–∏–ª–æ–∫)
- ‚úÖ **81% –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É** (–ø–µ—Ä–µ–≤–∏—â—É—î —Ü—ñ–ª—å–æ–≤—ñ 75%)
- ‚úÖ **100% –ø–æ–∫—Ä–∏—Ç—Ç—è** –∫–ª—é—á–æ–≤–∏—Ö –º–æ–¥—É–ª—ñ–≤
- ‚úÖ **–ö–æ–º–ø–ª–µ–∫—Å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

### üèÜ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ —Ç–µ—Å—Ç–∏ (–æ—Å–Ω–æ–≤–Ω—ñ)
- `test_exceptions_comprehensive.py` - –ü–æ–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
- `test_auth_functions_extended.py` - –†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ç–µ—Å—Ç–∏ JWT, —Ç–æ–∫–µ–Ω—ñ–≤ —Ç–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- `test_repository_contacts.py` - –¢–µ—Å—Ç–∏ CRUD –æ–ø–µ—Ä–∞—Ü—ñ–π –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –∑ SQLAlchemy
- `test_repository_users.py` - –¢–µ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `test_schemas.py` - –í–∞–ª—ñ–¥–∞—Ü—ñ—è Pydantic —Å—Ö–µ–º —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
- `test_auth_routes_comprehensive.py` - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ —Ç–µ—Å—Ç–∏ —Ä–æ—É—Ç—ñ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- `test_contacts_routes_simple.py` - –¢–µ—Å—Ç–∏ —Ä–æ—É—Ç—ñ–≤ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤

### üìà –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–æ–∫—Ä–∏—Ç—Ç—è
- `test_coverage_boost.py` - –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø–æ–∫—Ä–∏—Ç—Ç—è
- `test_auth_simple.py` - –ë–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏ —Å–µ—Ä–≤—ñ—Å—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- `test_email_simple.py` - –¢–µ—Å—Ç–∏ email —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

### üìú Legacy —Ç–µ—Å—Ç–∏ (–ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Å–µ—Ä–≤–µ—Ä–∞)
- `test_full_api.py` - –ü–æ–≤–Ω–∏–π —Ç–µ—Å—Ç API –∑ —Ä–µ–∞–ª—å–Ω–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- `test_error_handling.py` - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
- `simple_test.py` - –ü—Ä–æ—Å—Ç–∏–π —Ç–µ—Å—Ç –¥–ª—è –±–∞–∑–æ–≤–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- `test_with_client.py` - –¢–µ—Å—Ç–∏ –∑ TestClient
- `test_basic.py` - –ë–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏ –±–µ–∑ –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

### –û—Å–Ω–æ–≤–Ω—ñ —Ç–µ—Å—Ç–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
```bash
# –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫ –≤—Å—ñ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º
poetry run pytest tests/test_exceptions_comprehensive.py tests/test_auth_functions_extended.py tests/test_repository_contacts.py tests/test_repository_users.py tests/test_schemas.py tests/test_coverage_boost.py tests/test_auth_simple.py tests/test_email_simple.py tests/test_auth_routes_comprehensive.py tests/test_contacts_routes_simple.py --cov=src --cov-report=term-missing

# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ HTML –∑–≤—ñ—Ç—É
poetry run pytest --cov=src --cov-report=html
```

### –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–µ—Å—Ç—ñ–≤
```bash
# –¢–µ—Å—Ç–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤ —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
poetry run pytest tests/test_exceptions_comprehensive.py -v

# –¢–µ—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
poetry run pytest tests/test_auth_functions_extended.py tests/test_auth_simple.py tests/test_auth_routes_comprehensive.py -v

# –¢–µ—Å—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ —Ç–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
poetry run pytest tests/test_repository_contacts.py tests/test_repository_users.py -v

# –¢–µ—Å—Ç–∏ —Å—Ö–µ–º —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
poetry run pytest tests/test_schemas.py -v

# –¢–µ—Å—Ç–∏ —Ä–æ—É—Ç—ñ–≤ —Ç–∞ HTTP –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤
poetry run pytest tests/test_contacts_routes_simple.py tests/test_auth_routes_comprehensive.py -v
```

### Legacy —Ç–µ—Å—Ç–∏ (–ø–æ—Ç—Ä–µ–±—É—é—Ç—å –∑–∞–ø—É—â–µ–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Docker —Å–µ—Ä–≤—ñ—Å–∏
docker-compose up -d

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
poetry run uvicorn main:app --host 127.0.0.1 --port 8000

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ legacy —Ç–µ—Å—Ç–∏
poetry run python tests/test_full_api.py
poetry run python tests/test_error_handling.py
poetry run python tests/simple_test.py
poetry run python tests/test_basic.py
poetry run python tests/test_with_client.py
```

## üìä –ü–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É –ø–æ –º–æ–¥—É–ª—è—Ö

### ‚úÖ 100% –ø–æ–∫—Ä–∏—Ç—Ç—è
- `config.py` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫–∞
- `database/models.py` - SQLAlchemy –º–æ–¥–µ–ª—ñ
- `exceptions.py` - –∫–∞—Å—Ç–æ–º–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏
- `routes/contacts.py` - —Ä–æ—É—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤
- `schemas/contacts.py` - —Å—Ö–µ–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤  
- `schemas/users.py` - —Å—Ö–µ–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `services/cloudinary.py` - —Å–µ—Ä–≤—ñ—Å Cloudinary

### üìà –í–∏—Å–æ–∫–µ –ø–æ–∫—Ä–∏—Ç—Ç—è (90%+)
- `repository/contacts.py` - 97% –ø–æ–∫—Ä–∏—Ç—Ç—è
- `routes/auth.py` - 90% –ø–æ–∫—Ä–∏—Ç—Ç—è

### üìä –ó–∞–¥–æ–≤—ñ–ª—å–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è
- `repository/users.py` - 79% –ø–æ–∫—Ä–∏—Ç—Ç—è
- `services/auth.py` - 68% –ø–æ–∫—Ä–∏—Ç—Ç—è
- `services/email.py` - 54% –ø–æ–∫—Ä–∏—Ç—Ç—è
- `services/redis_cache.py` - 56% –ø–æ–∫—Ä–∏—Ç—Ç—è

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- **pytest** - –æ—Å–Ω–æ–≤–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **pytest-cov** - –∞–Ω–∞–ª—ñ–∑ –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É
- **pytest-asyncio** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥—É
- **unittest.mock** - –º–æ–∫—É–≤–∞–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- **FastAPI TestClient** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è HTTP –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤
- **SQLAlchemy –º–æ–∫—É–≤–∞–Ω–Ω—è** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

## üéØ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ç–µ—Å—Ç—ñ–≤

- üîí **–Ü–∑–æ–ª—å–æ–≤–∞–Ω—ñ —Ç–µ—Å—Ç–∏** - –∫–æ–∂–µ–Ω —Ç–µ—Å—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–ª–∞—Å–Ω—ñ –º–æ–∫–∏
- ‚ö° **–®–≤–∏–¥–∫–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** - —Ç–µ—Å—Ç–∏ –Ω–µ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
- üéØ **–í–∏—Å–æ–∫–µ –ø–æ–∫—Ä–∏—Ç—Ç—è** - 81% –∫–æ–¥—É –ø–æ–∫—Ä–∏—Ç–æ —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - –≤—Å—ñ 177 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É—Å–ø—ñ—à–Ω–æ
- üìä **–î–µ—Ç–∞–ª—å–Ω–∞ –∑–≤—ñ—Ç–Ω—ñ—Å—Ç—å** - HTML —Ç–∞ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –∑–≤—ñ—Ç–∏ –ø–æ–∫—Ä–∏—Ç—Ç—è

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–î–ª—è —à–≤–∏–¥–∫–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—ñ —Ç–µ—Å—Ç–∏ –∑ pytest
2. **–î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–µ—Å—Ç—ñ–≤
3. **–î–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø–æ–∫—Ä–∏—Ç—Ç—è** –≥–µ–Ω–µ—Ä—É–π—Ç–µ HTML –∑–≤—ñ—Ç
4. **–î–ª—è CI/CD** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –∑ term-missing –∑–≤—ñ—Ç–æ–º

## üåê –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Postman

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API —á–µ—Ä–µ–∑ Postman:

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä: `poetry run uvicorn main:app --host 127.0.0.1 --port 8000`
2. –Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ API —Å—Ö–µ–º—É –≤ Postman —á–µ—Ä–µ–∑ URL: `http://127.0.0.1:8000/openapi.json`
3. –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é:
   - **Swagger UI**: `http://127.0.0.1:8000/docs`
   - **ReDoc**: `http://127.0.0.1:8000/redoc`

## ‚öôÔ∏è –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ñ–∞–π–ª `.env` –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```
POSTGRES_DB=contacts_db
POSTGRES_USER=contacts_user
POSTGRES_PASSWORD=contacts_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
```

---

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —è–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä–∏—Ç—Ç—è –∑ 81% –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É —Ç–∞ 177 —É—Å–ø—ñ—à–Ω–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏!